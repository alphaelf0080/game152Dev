# æ·±å±¤ç¯€é»æ¨¹æ¸¬è©¦æŒ‡å—

## æ›´æ–°å…§å®¹ (2025-10-14)

### âœ¨ æ–°åŠŸèƒ½ï¼šæ”¯æ´ä»»æ„æ·±åº¦çš„ç¯€é»æ¨¹

ç¾åœ¨ Scene Converter æ“´å±•å·²ç¶“å¢å¼·ï¼Œèƒ½å¤ æ­£ç¢ºè™•ç†ä»»æ„æ·±åº¦çš„ç¯€é»çµæ§‹ï¼š

#### 1. **æ·±åº¦è¿½è¸ª**
- æ¯å€‹ç¯€é»éæ­·æ™‚æœƒè¨˜éŒ„ç•¶å‰å±¤ç´šæ·±åº¦
- ä½¿ç”¨ç¸®æ’é¡¯ç¤ºå±¤ç´šçµæ§‹ï¼Œæ›´ç›´è§€

#### 2. **è©³ç´°çš„å±¤ç´šæ—¥èªŒ**
```
[Scene Converter] å±¤ç´š 0: Canvas æœ‰ 3 å€‹å­ç¯€é»
  â””â”€ [1/3] Background
  [Scene Converter] å±¤ç´š 1: Background æœ‰ 0 å€‹å­ç¯€é»
  â””â”€ [2/3] MainMenu
    [Scene Converter] å±¤ç´š 1: MainMenu æœ‰ 5 å€‹å­ç¯€é»
      â””â”€ [1/5] Title
      â””â”€ [2/5] ButtonGroup
        [Scene Converter] å±¤ç´š 2: ButtonGroup æœ‰ 3 å€‹å­ç¯€é»
          â””â”€ [1/3] StartButton
          â””â”€ [2/3] OptionsButton
          â””â”€ [3/3] QuitButton
        [Scene Converter] âœ“ å±¤ç´š 2: ButtonGroup çš„ 3 å€‹å­ç¯€é»è™•ç†å®Œæˆ
      â””â”€ [3/5] Logo
      â””â”€ [4/5] Footer
      â””â”€ [5/5] Settings
    [Scene Converter] âœ“ å±¤ç´š 1: MainMenu çš„ 5 å€‹å­ç¯€é»è™•ç†å®Œæˆ
  â””â”€ [3/3] Camera
```

#### 3. **ç¯€é»æ¨¹çµ±è¨ˆ**
å°å‡ºå®Œæˆå¾Œæœƒé¡¯ç¤ºå®Œæ•´çµ±è¨ˆï¼š
```
[Scene Converter] ğŸ“Š ç¯€é»æ¨¹çµ±è¨ˆ:
  - ç¸½ç¯€é»æ•¸: 47
  - æœ€å¤§æ·±åº¦: 12
  - è‘‰å­ç¯€é»: 28
  - æœ‰å­ç¯€é»çš„ç¯€é»: 19
```

### ğŸ” é—œéµæ”¹é€²

#### UUID æå–é‚è¼¯
```javascript
// è™•ç†åµŒå¥— UUID å°è±¡ï¼š{ uuid: { uuid: 'actualString' } }
while (typeof childUuid === 'object' && childUuid !== null) {
    if (childUuid.uuid) {
        childUuid = childUuid.uuid;
    } else if (childUuid.value) {
        childUuid = childUuid.value;
    } else {
        break;
    }
}
```

#### éæ­¸æ·±åº¦å‚³é
```javascript
// traverseNode ç¾åœ¨æ¥å— depth åƒæ•¸
async traverseNode(node, depth = 0) {
    // è™•ç†ç•¶å‰ç¯€é»...
    
    // éæ­¸è™•ç†å­ç¯€é»æ™‚å‚³é depth + 1
    const childData = await exports.methods.traverseNode(child, depth + 1);
}
```

## æ¸¬è©¦å ´æ™¯å»ºè­°

### å ´æ™¯ 1: æ‰å¹³çµæ§‹ï¼ˆ1-2 å±¤ï¼‰
```
Scene
â”œâ”€ Canvas
â”‚  â”œâ”€ Background
â”‚  â””â”€ Label
â””â”€ Camera
```

### å ´æ™¯ 2: ä¸­ç­‰æ·±åº¦ï¼ˆ5-6 å±¤ï¼‰
```
Scene
â”œâ”€ Canvas
â”‚  â”œâ”€ GameUI
â”‚  â”‚  â”œâ”€ TopBar
â”‚  â”‚  â”‚  â”œâ”€ Score
â”‚  â”‚  â”‚  â””â”€ Lives
â”‚  â”‚  â””â”€ BottomBar
â”‚  â”‚     â”œâ”€ Skills
â”‚  â”‚     â”‚  â”œâ”€ Skill1
â”‚  â”‚     â”‚  â””â”€ Skill2
â”‚  â”‚     â””â”€ Items
â””â”€ Camera
```

### å ´æ™¯ 3: æ·±å±¤åµŒå¥—ï¼ˆ10+ å±¤ï¼‰
```
Scene
â”œâ”€ Canvas
â”‚  â””â”€ RootContainer
â”‚     â””â”€ Level1
â”‚        â””â”€ Level2
â”‚           â””â”€ Level3
â”‚              â””â”€ Level4
â”‚                 â””â”€ Level5
â”‚                    â””â”€ Level6
â”‚                       â””â”€ Level7
â”‚                          â””â”€ Level8
â”‚                             â””â”€ Level9
â”‚                                â””â”€ DeepestNode
â””â”€ Camera
```

## ä½¿ç”¨æ­¥é©Ÿ

1. **æ‰“é–‹ Cocos Creator 2D å°ˆæ¡ˆ**
2. **æ‰“é–‹æ¸¬è©¦å ´æ™¯**ï¼ˆå»ºè­°ä½¿ç”¨è¤‡é›œçš„å ´æ™¯çµæ§‹ï¼‰
3. **é–‹å•Ÿæ“´å±•é¢æ¿**ï¼šæ“´å±• â†’ Scene Converter
4. **é»æ“Šã€Œå°å‡ºå ´æ™¯ã€æŒ‰éˆ•**
5. **è§€å¯Ÿæ§åˆ¶å°è¼¸å‡º**ï¼š
   - æª¢æŸ¥å±¤ç´šçµæ§‹æ˜¯å¦æ­£ç¢ºé¡¯ç¤º
   - ç¢ºèªæ‰€æœ‰å­ç¯€é»éƒ½è¢«è™•ç†
   - æŸ¥çœ‹æœ€çµ‚çµ±è¨ˆæ•¸æ“š

6. **æª¢æŸ¥å°å‡ºçš„ JSON**ï¼š
   - æ‰“é–‹ `é …ç›®ç›®éŒ„/scene-exports/scene-*.json`
   - é©—è­‰ `children` æ•¸çµ„æ˜¯å¦å®Œæ•´
   - æª¢æŸ¥æœ€æ·±ç¯€é»æ˜¯å¦å­˜åœ¨

## é æœŸçµæœ

âœ… **æˆåŠŸæ¨™æº–ï¼š**
- æ‰€æœ‰å±¤ç´šçš„ç¯€é»éƒ½è¢«æ­£ç¢ºå°å‡º
- æ§åˆ¶å°é¡¯ç¤ºå®Œæ•´çš„å±¤ç´šçµæ§‹
- JSON æ–‡ä»¶åŒ…å«æ‰€æœ‰ç¯€é»ï¼ˆåŒ…æ‹¬æœ€æ·±å±¤çš„ç¯€é»ï¼‰
- çµ±è¨ˆæ•¸æ“šæº–ç¢ºï¼ˆç¸½ç¯€é»æ•¸ã€æœ€å¤§æ·±åº¦ç­‰ï¼‰

âš ï¸ **å¯èƒ½çš„å•é¡Œï¼š**
- å¦‚æœæŸå€‹ç¯€é»ç„¡æ³•æŸ¥è©¢ï¼Œæœƒé¡¯ç¤ºè­¦å‘Šä½†ç¹¼çºŒè™•ç†å…¶ä»–ç¯€é»
- éå¸¸æ·±çš„çµæ§‹ï¼ˆ20+ å±¤ï¼‰å¯èƒ½éœ€è¦è¼ƒé•·æ™‚é–“

## é©—è­‰ç¯€é»å®Œæ•´æ€§

ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•é©—è­‰å°å‡ºçš„ JSONï¼š

```javascript
// åœ¨ç€è¦½å™¨æ§åˆ¶å°æˆ– Node.js ä¸­é‹è¡Œ
function countNodes(node) {
    let count = 1;
    if (node.children) {
        node.children.forEach(child => {
            count += countNodes(child);
        });
    }
    return count;
}

// è®€å– JSON
const data = require('./scene-exports/scene-1728901234567.json');
const total = data.children.reduce((sum, root) => sum + countNodes(root), 0);
console.log('ç¸½ç¯€é»æ•¸:', total);
```

## æ€§èƒ½è€ƒé‡

- **å°å‹å ´æ™¯ï¼ˆ< 50 ç¯€é»ï¼‰**ï¼šå¹¾ç§’å…§å®Œæˆ
- **ä¸­å‹å ´æ™¯ï¼ˆ50-200 ç¯€é»ï¼‰**ï¼š10-30 ç§’
- **å¤§å‹å ´æ™¯ï¼ˆ200+ ç¯€é»ï¼‰**ï¼šå¯èƒ½éœ€è¦ 1 åˆ†é˜ä»¥ä¸Š

æ¯å€‹ç¯€é»éƒ½éœ€è¦ä¸€æ¬¡ API æŸ¥è©¢ï¼Œæ·±å±¤çµæ§‹æœƒå°è‡´å¤§é‡çš„æŸ¥è©¢æ“ä½œã€‚

## ä¸‹ä¸€æ­¥

å®Œæˆå°å‡ºæ¸¬è©¦å¾Œï¼š
1. æ‰“é–‹ **3D å°ˆæ¡ˆ**
2. é–‹å•Ÿ Scene Converter æ“´å±•
3. é»æ“Šã€Œé¸æ“‡æ–‡ä»¶ã€é¸æ“‡å°å‡ºçš„ JSON
4. é»æ“Šã€Œå°å…¥å ´æ™¯ã€æŒ‰éˆ•
5. é©—è­‰ç¯€é»çµæ§‹æ˜¯å¦æ­£ç¢ºé‡å»º
