# è³‡æºé©—è­‰å·¥å…·ä½¿ç”¨æŒ‡å—

**å·¥å…·åç¨±**: ResourceValidator  
**æª”æ¡ˆä½ç½®**: `assets/script/Tools/ResourceValidator.ts`  
**ç”¨é€”**: è‡ªå‹•æª¢æ¸¬ä¸¦ä¿®å¾©å ´æ™¯ä¸­ç¼ºå°‘çš„è³‡æº

---

## ğŸ“– åŠŸèƒ½èªªæ˜

ResourceValidator æ˜¯ä¸€å€‹å¼·å¤§çš„è³‡æºæª¢æ¸¬å·¥å…·ï¼Œå¯ä»¥ï¼š

- âœ… è‡ªå‹•æƒæå ´æ™¯ä¸­æ‰€æœ‰ç¯€é»
- âœ… æª¢æ¸¬ç¼ºå°‘çš„ Spriteã€Buttonã€Spine è³‡æº
- âœ… æ‰¾å‡ºæœªçŸ¥æˆ–æå£çš„çµ„ä»¶
- âœ… è‡ªå‹•ä¿®å¾©ç¼ºå°‘çš„è³‡æºï¼ˆå¯é¸ï¼‰
- âœ… ç”Ÿæˆè©³ç´°çš„æª¢æ¸¬å ±å‘Š
- âœ… æ”¯æ´å®šæœŸæª¢æ¸¬

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æ­¥é©Ÿ 1: æ›è¼‰çµ„ä»¶

1. åœ¨ Cocos Creator ä¸­é–‹å•Ÿ `main.scene`
2. é¸æ“‡ `Canvas` ç¯€é»
3. é»æ“Šã€Œæ·»åŠ çµ„ä»¶ã€â†’ã€Œè‡ªå®šç¾©çµ„ä»¶ã€â†’ã€ŒResourceValidatorã€

### æ­¥é©Ÿ 2: è¨­ç½®é è¨­è³‡æº

åœ¨å±¬æ€§é¢æ¿ä¸­è¨­ç½®ä»¥ä¸‹è³‡æºï¼ˆç”¨æ–¼è‡ªå‹•ä¿®å¾©ï¼‰ï¼š

| å±¬æ€§ | èªªæ˜ | æ˜¯å¦å¿…å¡« |
|------|------|---------|
| Default Sprite Frame | é è¨­åœ–ç‰‡ | å¯é¸ |
| Default Button Normal | é è¨­æŒ‰éˆ•ä¸€èˆ¬ç‹€æ…‹åœ–ç‰‡ | å¯é¸ |
| Default Button Pressed | é è¨­æŒ‰éˆ•æŒ‰ä¸‹ç‹€æ…‹åœ–ç‰‡ | å¯é¸ |
| Default Button Hover | é è¨­æŒ‰éˆ•æ‡¸åœç‹€æ…‹åœ–ç‰‡ | å¯é¸ |

### æ­¥é©Ÿ 3: é…ç½®é¸é …

| é¸é … | èªªæ˜ | é è¨­å€¼ |
|------|------|--------|
| è‡ªå‹•ä¿®å¾© | æ˜¯å¦è‡ªå‹•ä¿®å¾©ç¼ºå°‘çš„è³‡æº | false |
| è©³ç´°æ—¥èªŒ | æ˜¯å¦è¼¸å‡ºè©³ç´°çš„æª¢æ¸¬æ—¥èªŒ | true |
| æª¢æ¸¬é–“éš” | å®šæœŸæª¢æ¸¬çš„æ™‚é–“é–“éš”ï¼ˆç§’ï¼‰ï¼Œ0 è¡¨ç¤ºåªåœ¨å•Ÿå‹•æ™‚æª¢æ¸¬ä¸€æ¬¡ | 0 |

### æ­¥é©Ÿ 4: åŸ·è¡Œæª¢æ¸¬

1. å„²å­˜å ´æ™¯
2. é»æ“Šã€ŒåŸ·è¡Œã€æŒ‰éˆ•
3. æŸ¥çœ‹ Console è¼¸å‡ºçš„æª¢æ¸¬å ±å‘Š

---

## ğŸ“‹ æª¢æ¸¬å ±å‘Šç¯„ä¾‹

```
============================================================
ğŸ“‹ è³‡æºé©—è­‰å ±å‘Š
============================================================

ğŸ“Š çµ±è¨ˆè³‡è¨Š:
   ç¼ºå°‘è³‡æº: 6 å€‹
   å·²ä¿®å¾©è³‡æº: 0 å€‹
   æœªçŸ¥çµ„ä»¶: 1 å€‹

âŒ ç¼ºå°‘çš„è³‡æºè©³æƒ…:

   ã€Sprite.spriteFrameã€‘- 1 å€‹:
      â€¢ Canvas/BaseGame/Page/miniSpinNode/miniSpinShow

   ã€Button.normalSpriteã€‘- 3 å€‹:
      â€¢ Canvas/BaseGame/Page/FeatureBuyPage/FeatureBuyPage1/BuyBtn100
      â€¢ Canvas/BaseGame/Page/FeatureBuyPage/FeatureBuyPage1/BuyBtn80
      â€¢ Canvas/BaseGame/Page/FeatureBuyPage/FeatureBuyPage1/BuyBtn60

   ã€Spine.animation(<None>)ã€‘- 2 å€‹:
      â€¢ Canvas/BaseGame/Layer/Shake/Animation/BonusController
      â€¢ Canvas/BaseGame/Layer/Shake/Animation/WildController

âš ï¸  æœªçŸ¥çµ„ä»¶è©³æƒ…:
   â€¢ Unknown Component (null) at Canvas/BaseGame/Page/TestNode

============================================================
å ±å‘ŠçµæŸ
============================================================
```

---

## ğŸ”§ ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1: å¿«é€Ÿè¨ºæ–·å•é¡Œ

ç•¶éŠæˆ²å‡ºç¾è³‡æºéºå¤±éŒ¯èª¤æ™‚ï¼š

1. å°‡ `autoFix` è¨­ç‚º `false`
2. å°‡ `verboseLog` è¨­ç‚º `true`
3. åŸ·è¡ŒéŠæˆ²ï¼ŒæŸ¥çœ‹å®Œæ•´çš„éŒ¯èª¤å ±å‘Š

### å ´æ™¯ 2: è‡ªå‹•ä¿®å¾©è³‡æº

ç•¶éœ€è¦å¿«é€Ÿä¿®å¾©ç¼ºå°‘çš„è³‡æºæ™‚ï¼š

1. è¨­ç½®å¥½æ‰€æœ‰é è¨­è³‡æº
2. å°‡ `autoFix` è¨­ç‚º `true`
3. åŸ·è¡ŒéŠæˆ²ï¼Œå·¥å…·æœƒè‡ªå‹•ä¿®å¾©ä¸¦è¨˜éŒ„

### å ´æ™¯ 3: å®šæœŸç›£æ§

åœ¨é–‹ç™¼éç¨‹ä¸­æŒçºŒç›£æ§è³‡æºç‹€æ…‹ï¼š

1. å°‡ `checkInterval` è¨­ç‚º `60`ï¼ˆæ¯ 60 ç§’æª¢æ¸¬ä¸€æ¬¡ï¼‰
2. å°‡ `verboseLog` è¨­ç‚º `false`ï¼ˆæ¸›å°‘æ—¥èªŒè¼¸å‡ºï¼‰
3. èƒŒæ™¯é‹è¡Œï¼Œæœ‰å•é¡Œæ™‚æœƒè‡ªå‹•æé†’

---

## ğŸ’» ç¨‹å¼åŒ–ä½¿ç”¨

### æ–¹æ³• 1: å¾å…¶ä»–è…³æœ¬è§¸ç™¼æª¢æ¸¬

```typescript
import { ResourceValidator } from './Tools/ResourceValidator';

// å–å¾— ResourceValidator çµ„ä»¶
const canvas = find("Canvas");
const validator = canvas?.getComponent(ResourceValidator);

if (validator) {
    // æ‰‹å‹•è§¸ç™¼æª¢æ¸¬
    validator.validate();
    
    // å–å¾—çµ±è¨ˆè³‡è¨Š
    const missingCount = validator.getMissingCount();
    const fixedCount = validator.getFixedCount();
    
    console.log(`ç¼ºå°‘: ${missingCount}, å·²ä¿®å¾©: ${fixedCount}`);
}
```

### æ–¹æ³• 2: åœ¨è¼‰å…¥å®Œæˆå¾Œè‡ªå‹•æª¢æ¸¬

```typescript
// åœ¨ LoadingScene æˆ– GameController ä¸­
start() {
    this.scheduleOnce(() => {
        const canvas = find("Canvas");
        const validator = canvas?.getComponent(ResourceValidator);
        if (validator) {
            validator.validate();
        }
    }, 2); // å»¶é² 2 ç§’ï¼Œç¢ºä¿æ‰€æœ‰è³‡æºè¼‰å…¥å®Œæˆ
}
```

---

## ğŸ¯ é‡å°ç•¶å‰å•é¡Œçš„ä¿®å¾©æ­¥é©Ÿ

### å•é¡Œ 1: ç¼ºå°‘ UUID è³‡æº

**å—å½±éŸ¿ç¯€é»**:
- `Canvas/BaseGame/Page/miniSpinNode/miniSpinShow`
- `Canvas/BaseGame/Page/miniSpinNode/miniSpinBg/miniSpinNotice`
- `Canvas/BaseGame/Page/FeatureBuyPage/FeatureBuyPage1/BuyBtn*`

**ä¿®å¾©æ­¥é©Ÿ**:

1. **æ‰¾åˆ°åŸå§‹åœ–ç‰‡è³‡æº**
   ```bash
   # æœå°‹å¯èƒ½çš„åœ–ç‰‡æª”æ¡ˆ
   Get-ChildItem -Path assets\res -Recurse -Include *.png,*.jpg | Where-Object { $_.Name -like "*spin*" -or $_.Name -like "*buy*" }
   ```

2. **åœ¨ Cocos Creator ä¸­é‡æ–°æŒ‡å®š**
   - é–‹å•Ÿ `main.scene`
   - é¸æ“‡å—å½±éŸ¿çš„ç¯€é»
   - åœ¨å±¬æ€§é¢æ¿ä¸­é‡æ–°æ‹–å…¥æ­£ç¢ºçš„ SpriteFrame

3. **æˆ–ä½¿ç”¨ ResourceValidator è‡ªå‹•ä¿®å¾©**
   - è¨­ç½®ä¸€å€‹é è¨­åœ–ç‰‡
   - å•Ÿç”¨è‡ªå‹•ä¿®å¾©
   - åŸ·è¡ŒéŠæˆ²

### å•é¡Œ 2: æœªçŸ¥çµ„ä»¶ `ea630dZsN1HeYme0pj/1VW9`

**ä¿®å¾©æ­¥é©Ÿ**:

1. **æœå°‹çµ„ä»¶æª”æ¡ˆ**
   ```bash
   cd c:\projects\game152Dev\assets\script
   Get-ChildItem -Recurse -Filter "*.ts" | Select-String "@ccclass"
   ```

2. **æª¢æŸ¥å ´æ™¯æª”æ¡ˆ**
   - é–‹å•Ÿ `main.scene`
   - æœå°‹ç¯€é»ä¸­æ˜¯å¦æœ‰ã€ŒMissing Scriptã€æˆ–ç´…è‰²æ„Ÿå˜†è™Ÿ
   - ç§»é™¤æå£çš„çµ„ä»¶

3. **æˆ–ä½¿ç”¨å·¥å…·æª¢æ¸¬**
   - åŸ·è¡Œ ResourceValidator
   - æŸ¥çœ‹ã€ŒæœªçŸ¥çµ„ä»¶è©³æƒ…ã€éƒ¨åˆ†
   - æ‰¾åˆ°ä¸¦ä¿®å¾©å°æ‡‰ç¯€é»

### å•é¡Œ 3: Spine å‹•ç•« `<None>`

**ä¿®å¾©æ­¥é©Ÿ**:

1. **ä½¿ç”¨ ResourceValidator è‡ªå‹•ä¿®å¾©**
   - å•Ÿç”¨è‡ªå‹•ä¿®å¾©
   - å·¥å…·æœƒè‡ªå‹•è¨­ç½®ç‚ºç¬¬ä¸€å€‹å¯ç”¨å‹•ç•«

2. **æ‰‹å‹•ä¿®å¾©**
   - é¸æ“‡å—å½±éŸ¿çš„ Spine ç¯€é»
   - åœ¨ Animation å±¬æ€§ä¸­é¸æ“‡æ­£ç¢ºçš„å‹•ç•«
   - æˆ–æ¸…ç©ºå‹•ç•«åç¨±

---

## ğŸ“Š æ•ˆèƒ½è€ƒé‡

### è¨˜æ†¶é«”ä½¿ç”¨

- æ¯æ¬¡æª¢æ¸¬æœƒéæ­·æ•´å€‹å ´æ™¯æ¨¹
- å»ºè­°ä¸è¦è¨­ç½®éçŸ­çš„æª¢æ¸¬é–“éš”ï¼ˆ< 10 ç§’ï¼‰
- æª¢æ¸¬å®Œæˆå¾Œæœƒè‡ªå‹•é‡‹æ”¾è‡¨æ™‚è³‡æ–™

### åŸ·è¡Œæ™‚é–“

- ä¸€èˆ¬å ´æ™¯ï¼ˆ< 500 å€‹ç¯€é»ï¼‰: ~50ms
- è¤‡é›œå ´æ™¯ï¼ˆ500-1000 å€‹ç¯€é»ï¼‰: ~100-200ms
- è¶…å¤§å ´æ™¯ï¼ˆ> 1000 å€‹ç¯€é»ï¼‰: ~300-500ms

### æœ€ä½³å¯¦è¸

- âœ… åªåœ¨é–‹ç™¼éšæ®µå•Ÿç”¨
- âœ… ç™¼å¸ƒç‰ˆæœ¬å‰ç§»é™¤æ­¤çµ„ä»¶
- âœ… ä½¿ç”¨ `checkInterval = 0`ï¼ˆåªæª¢æ¸¬ä¸€æ¬¡ï¼‰
- âœ… å•é¡Œä¿®å¾©å¾Œé—œé–‰ `verboseLog`

---

## ğŸ› ç–‘é›£æ’è§£

### Q: å·¥å…·æ²’æœ‰è¼¸å‡ºå ±å‘Š

**A**: æª¢æŸ¥ä»¥ä¸‹é …ç›®ï¼š
- çµ„ä»¶æ˜¯å¦æ­£ç¢ºæ›è¼‰åˆ° Canvas
- Console æ˜¯å¦å·²é–‹å•Ÿ
- æ˜¯å¦æœ‰ç·¨è­¯éŒ¯èª¤

### Q: è‡ªå‹•ä¿®å¾©æ²’æœ‰ä½œç”¨

**A**: ç¢ºèªï¼š
- `autoFix` æ˜¯å¦è¨­ç‚º `true`
- æ˜¯å¦å·²è¨­ç½®å°æ‡‰çš„é è¨­è³‡æº
- é è¨­è³‡æºæ˜¯å¦æœ‰æ•ˆ

### Q: æª¢æ¸¬é€Ÿåº¦å¤ªæ…¢

**A**: å„ªåŒ–æ–¹æ³•ï¼š
- æ¸›å°‘æª¢æ¸¬é–“éš”
- é—œé–‰ `verboseLog`
- åªåœ¨éœ€è¦æ™‚æ‰‹å‹•è§¸ç™¼æª¢æ¸¬

---

## ğŸ”„ ç‰ˆæœ¬æ­·å²

| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´å…§å®¹ |
|------|------|---------|
| 1.0 | 2025-10-13 | åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æ´åŸºæœ¬æª¢æ¸¬èˆ‡ä¿®å¾© |

---

## ğŸ“ æŠ€è¡“æ”¯æ´

å¦‚æœ‰å•é¡Œï¼Œè«‹åƒè€ƒï¼š
- [è³‡æºéºå¤±ä¿®å¾©æŒ‡å—](./Resource-Missing-Fix-Guide.md)
- [ReelController é‡æ§‹å ±å‘Š](./ReelController-Refactor-Phase1-Report.md)

---

**æœ€å¾Œæ›´æ–°**: 2025-10-13  
**ç¶­è­·è€…**: Development Team
