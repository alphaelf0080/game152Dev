# 好運咚咚 - 完整場景節點結構圖

> 根據 `main.scene` 文件生成的完整場景節點結構  
> 生成日期：2025-10-27

## 完整節點樹狀結構

```
📦 main (Scene Root)
│
└── 📌 Canvas
    ├── 📷 Camera
    │
    └── 🎮 BaseGame
        │
        ├── 📊 Layer
        │   └── 🎰 Shake
        │       ├── BS_bg (背景)
        │       │
        │       └── 🎡 Reel (捲軸系統)
        │           ├── reelBaseColor (底色)  , reel背景圖, 需切換BS FS
        │           ├── reelFrame (框架) , SpriteFrame > ReelBS_bgBase 
        │           │
        │           ├── 🎭 reelMask (遮罩 1)   , reel 遮罩，顯示區域
        │           │   └── 🎯 symbol  ,Symbol.ts , SpriteFrame > Symbol_01,
        │           │       ├── HL (高亮效果)  , symbol glow
        │           │       └── 🎬 Anm (動畫組)  , Spine > symbol_00.json, 3D > glb
        │           │           ├── WildNumber (Wild 數字) , 未定義
        │           │           ├── lowSymAnm (低級符號動畫)  , 未定義
        │           │           ├── particle (粒子效果) , 未定義
        │           │           └── change (變換效果)  ,symbol 變換, spine > change.json
        │           │
        │           └── 🎭 reelMask2 (遮罩 2)
        │               └── 🎯 symbol
        │                   ├── HL (高亮效果)
        │                   └── 🎬 Anm (動畫組)
        │                       └── WildNumber (Wild 數字)
        │
        ├── 💎 UI (使用者介面層)
        │   ├── 🎲 reelBlack (捲軸框架)
        │   │   ├── reel0 (捲軸 0)
        │   │   ├── reel1 (捲軸 1)
        │   │   ├── reel2 (捲軸 2)
        │   │   ├── reel3 (捲軸 3)
        │   │   └── reel4 (捲軸 4)
        │   │
        │   ├── 🌟 BkgAnm (背景動畫)
        │   ├── 🌟 BkgAnmFs (全屏背景動畫)
        │   │
        │   └── 💰 BsUI (基礎 UI 系統)
        │       └── 🎁 FeatureBuyButton (功能購買按鈕)
        │           └── FeatureBuyAnm (購買動畫 - Spine)
        │
        ├── ⚙️ SettingsPage (設定頁面)
        │   ├── 🎯 SpinBtn (旋轉按鈕)
        │   │   ├── SpinAnm (旋轉動畫 - Spine)
        │   │   ├── SpinAnmAuto (自動旋轉動畫 - Spine)
        │   │   └── SpinNum (數字顯示)
        │   │
        │   ├── ⚡ TurboBtn (加速按鈕)
        │   │   └── TurboAnm (加速動畫 - Spine)
        │   │
        │   ├── 🔽 BetLessBtn (減少注額按鈕)
        │   ├── 🔼 BetPlusBtn (增加注額按鈕)
        │   │
        │   ├── 🔄 AutoButton (自動按鈕)
        │   │   ├── AutoAnm (自動動畫 - Spine)
        │   │   └── AutoDis (禁用狀態)
        │   │
        │   └── 📋 MenuButton (選單按鈕)
        │       ├── Click (點擊效果)
        │       └── VoiceOff (靜音圖示)
        │
        ├── ⚙️ SettingsPage2 (設定頁面 2)
        │   ├── SetBlock (遮罩)
        │   ├── 🏠 HomeButton (首頁按鈕)
        │   ├── 🔊 VoiceButton (音量按鈕)
        │   ├── ❓ HelpButton (幫助按鈕)
        │   ├── 📜 HistoryButton (歷史按鈕)
        │   └── ❌ CancelButton (取消按鈕)
        │
        ├── 🎊 FSUI (Free Spin UI)
        │   ├── FreeSpinNum (免費旋轉次數)
        │   ├── FreeSpinNum_1 (次數顯示 1)
        │   └── FreeSpinNum_2 (次數顯示 2)
        │
        ├── ℹ️ InfoController (資訊控制器)
        │   ├── 💰 Credit (點數)
        │   │   └── CreditCurrency (貨幣符號)
        │   │
        │   ├── 🎲 BtnBet (下注按鈕)
        │   │   ├── BetBg_On (下注背景-開啟)
        │   │   ├── BetBg_Off (下注背景-關閉)
        │   │   ├── Bet (下注金額)
        │   │   └── BetCurrency (下注貨幣)
        │   │
        │   ├── 🏆 WinBtn (獲勝按鈕)
        │   │   ├── WinBg_On (獲勝背景-開啟)
        │   │   ├── WinBg_Off (獲勝背景-關閉)
        │   │   ├── Win (獲勝金額)
        │   │   └── WinCurrency (獲勝貨幣)
        │   │
        │   └── 🎯 GameWay (遊戲方式)
        │
        ├── 🔄 AutoPage (自動頁面)
        │
        ├── 📄 Page (頁面容器)
        │   │
        │   ├── 🛡️ FeatureBuyBlock (功能購買遮罩)
        │   │
        │   ├── 🛒 FeatureBuyPage (功能購買頁面)
        │   │   │
        │   │   ├── FeatureBuyPage1 (購買頁面 1)
        │   │   │   ├── FeatureBuyCloseBtn1 (關閉按鈕 1)
        │   │   │   │
        │   │   │   └── FeatureStrikeMenu (功能選單)
        │   │   │       ├── BuyBtnAnm (購買按鈕動畫 - Spine)
        │   │   │       │
        │   │   │       ├── BuyBtn100 (購買按鈕 100%)
        │   │   │       │   └── FeatureBuyCost100 (成本 100)
        │   │   │       │
        │   │   │       ├── BuyBtn80 (購買按鈕 80%)
        │   │   │       │   └── FeatureBuyCost80 (成本 80)
        │   │   │       │
        │   │   │       └── BuyBtn60 (購買按鈕 60%)
        │   │   │           └── FeatureBuyCost60 (成本 60)
        │   │   │
        │   │   └── FeatureBuyPage2 (購買頁面 2)
        │   │       ├── FeatureBuyCloseBtn2 (關閉按鈕 2)
        │   │       ├── FeatureBuyBackBtn (返回按鈕)
        │   │       ├── FeatureBuyText (購買文字)
        │   │       ├── FeatureBuyCostNum (成本數字)
        │   │       ├── FeatureBuyBackBtn2 (返回按鈕 2)
        │   │       ├── BuyBtnAnm2 (購買按鈕動畫 2 - Spine)
        │   │       ├── FeatureBuyStartBtn (開始按鈕)
        │   │       ├── FeatureBuyTitle (購買標題)
        │   │       ├── FeatureBuyLabel (購買標籤)
        │   │       ├── FeatureBuyDiscount (折扣標籤)
        │   │       └── FeatureBuyTtileAnm (標題動畫 - Spine)
        │   │
        │   ├── ❓ HelpPage (幫助頁面)
        │   │   ├── HelpBg (幫助背景)
        │   │   │   ├── Bg (背景)
        │   │   │   ├── Title (標題)
        │   │   │   ├── Notice (公告)
        │   │   │   ├── Page_01 (頁面 01)
        │   │   │   ├── Page_02 (頁面 02)
        │   │   │   ├── Page_03 (頁面 03)
        │   │   │   ├── Page_04 (頁面 04)
        │   │   │   └── Page_06 (頁面 06)
        │   │   │
        │   │   ├── HelpButtons (幫助按鈕組)
        │   │   │   ├── Back (返回)
        │   │   │   ├── PrevPage (上一頁)
        │   │   │   └── NextPage (下一頁)
        │   │   │
        │   │   ├── FaLabel (標籤組)
        │   │   │   └── 1 (標籤 1)
        │   │   │
        │   │   └── GameVersion (遊戲版本)
        │   │
        │   └── 📜 BetSCroll (下注滾動頁面)
        │       ├── Block (遮罩 1)
        │       ├── Block2 (遮罩 2)
        │       │
        │       ├── ScrollBg (滾動背景)
        │       │   ├── text1 (文字 1)
        │       │   ├── text2 (文字 2)
        │       │   └── line (分隔線)
        │       │
        │       ├── 📊 ScrollR (右側滾動)
        │       │   ├── scrollBar (滾動條)
        │       │   │   └── bar (滾動條本體)
        │       │   └── content (內容容器)
        │       │       └── view (視圖)
        │       │           ├── - (分隔符)
        │       │           └── item (項目)
        │       │
        │       ├── 📊 ScrollB (底部滾動)
        │       │   ├── scrollBar (滾動條)
        │       │   │   └── bar (滾動條本體)
        │       │   └── content (內容容器)
        │       │       └── view (視圖)
        │       │           ├── - (分隔符)
        │       │           └── item (項目)
        │       │
        │       ├── 📊 ScrollL (左側滾動)
        │       │   ├── scrollBar (滾動條)
        │       │   │   └── bar (滾動條本體)
        │       │   └── content (內容容器)
        │       │       └── view (視圖)
        │       │           ├── - (分隔符)
        │       │           └── item (項目)
        │       │
        │       ├── 📊 ScrollT (頂部滾動)
        │       │   ├── scrollBar (滾動條)
        │       │   │   └── bar (滾動條本體)
        │       │   └── content (內容容器)
        │       │       └── view (視圖)
        │       │           ├── - (分隔符)
        │       │           └── item (項目)
        │       │
        │       ├── ScrollBtn (滾動按鈕組)
        │       │   ├── ScrollUpR (右上滾動)
        │       │   ├── ScrollDownR (右下滾動)
        │       │   ├── ScrollUpB (底部上滾動)
        │       │   ├── ScrollDownB (底部下滾動)
        │       │   ├── ScrollUpT (頂部上滾動)
        │       │   └── ScrollDownT (頂部下滾動)
        │       │
        │       ├── MaxBetAnm (最大下注動畫 - Spine)
        │       ├── MaxBetTxt (最大下注文字)
        │       ├── MaxBetAlpha (最大下注透明度)
        │       ├── BetCheck (下注確認)
        │       ├── BtnClose (關閉按鈕)
        │       └── MaxBetNum (最大下注數字)
        │
        ├── 📢 MessageController (訊息控制器)
        │   ├── paytableBgLeft (賠率表背景左)
        │   └── paytableBgRight (賠率表背景右)
        │
        ├── ✨ Spread (傳播效果系統)
        │   └── Spread (傳播容器)
        │       ├── AnmNode (動畫節點)
        │       │   ├── ComboLightAnm (連擊光效動畫 - Spine)
        │       │   ├── ComboSparkAnm (連擊火花動畫 - Spine)
        │       │   └── ComboNumBeginAnm (連擊數字開始動畫 - Spine)
        │       │
        │       ├── LineNum (線數)
        │       │   ├── Node1 (節點 1)
        │       │   └── LineSpread (線傳播)
        │       │
        │       ├── ComboHitBeginAnm (連擊開始動畫 - Spine)
        │       └── ComboGlowAnm (連擊發光動畫 - Spine)
        │
        ├── 🎰 Multiple (倍數系統)
        │   ├── MultipleAnm (倍數動畫 - Spine)
        │   ├── MultipleNum (倍數數字)
        │   ├── MultipleNumAnmOnes (個位數動畫 - Spine)
        │   ├── MultipleNumAnmTen (十位數動畫 - Spine)
        │   └── MultipleNumAnmHundred (百位數動畫 - Spine)
        │
        └── 🎬 Animation (動畫系統)
            ├── bkg (背景)
            ├── ScreenSlowmote (慢動作效果)
            ├── ComboAnm (連擊動畫)
            │
            ├── SymbolAnm (符號動畫組)
            │   ├── DropSlow (掉落慢動作)
            │   │   ├── Node0 (節點 0)
            │   │   ├── Node1 (節點 1)
            │   │   └── Node2 (節點 2)
            │   │
            │   ├── Acvtive (啟動效果)
            │   ├── SymbolScatter (Scatter 符號)
            │   ├── reelSlow (捲軸慢動作)
            │   └── SymbolDragon (龍符號)
            │
            └── 📜 BannerController (橫幅控制器)
                ├── 🦴 sp.Skeleton [Spine Component]
                │   ├── SkeletonData: skeletonMotion.json
                │   ├── Animation: slowmotion
                │   ├── Color: FFFFFF → Dynamic
                │   └── CustomMaterial: cc.Material
                │
                └── 📜 SpineAnimationController.ts
                    ├── ✅ Enable Color Control
                    ├── 🎨 Skeleton Color: RGBA
                    ├── 🎬 Animation Control
                    ├── ⏩ Playback Speed
                    └── 🔄 Loop Settings
```

---

## 節點統計

| 節點類型 | 數量 | 說明 |
|---------|------|------|
| **Spine 動畫節點** | 19 | 包含各種動畫效果 |
| **UI 按鈕** | 20+ | 各種功能按鈕 |
| **滾動視圖** | 4 | ScrollR, ScrollB, ScrollL, ScrollT |
| **頁面容器** | 5 | 各種功能頁面 |
| **符號節點** | 2 | reelMask, reelMask2 中的 symbol |
| **遮罩節點** | 2 | reelMask, reelMask2 |

---

## 核心系統節點說明

### 1. 捲軸系統 (Reel System)

```
Layer > Shake > Reel
├── reelBaseColor (底色層)
├── reelFrame (框架層)
├── reelMask (第一層遮罩)
│   └── symbol (符號容器)
│       ├── HL (高亮層)
│       └── Anm (動畫層)
│           ├── WildNumber
│           ├── lowSymAnm
│           ├── particle
│           └── change
└── reelMask2 (第二層遮罩)
    └── symbol (符號容器)
        ├── HL (高亮層)
        └── Anm (動畫層)
            └── WildNumber
```

**功能說明：**
- **雙遮罩設計**：支援多層符號疊加效果
- **動畫系統**：包含 Wild、低級符號、粒子效果和變換動畫
- **高亮效果**：每個符號都有獨立的高亮層

### 2. Spine 動畫節點清單

| 節點名稱 | 路徑 | 功能 |
|---------|------|------|
| **FeatureBuyAnm** | BsUI > FeatureBuyButton | 功能購買按鈕動畫 |
| **SpinAnm** | SettingsPage > SpinBtn | 旋轉按鈕動畫 |
| **SpinAnmAuto** | SettingsPage > SpinBtn | 自動旋轉動畫 |
| **TurboAnm** | SettingsPage > TurboBtn | 加速按鈕動畫 |
| **AutoAnm** | SettingsPage > AutoButton | 自動按鈕動畫 |
| **BuyBtnAnm** | FeatureStrikeMenu | 購買按鈕動畫 |
| **BuyBtnAnm2** | FeatureBuyPage2 | 購買按鈕動畫 2 |
| **FeatureBuyTtileAnm** | FeatureBuyPage2 | 購買標題動畫 |
| **MaxBetAnm** | BetSCroll | 最大下注動畫 |
| **ComboLightAnm** | Spread > AnmNode | 連擊光效動畫 |
| **ComboSparkAnm** | Spread > AnmNode | 連擊火花動畫 |
| **ComboNumBeginAnm** | Spread > AnmNode | 連擊數字開始動畫 |
| **ComboHitBeginAnm** | Spread | 連擊開始動畫 |
| **ComboGlowAnm** | Spread | 連擊發光動畫 |
| **MultipleAnm** | Multiple | 倍數主動畫 |
| **MultipleNumAnmOnes** | Multiple | 個位數動畫 |
| **MultipleNumAnmTen** | Multiple | 十位數動畫 |
| **MultipleNumAnmHundred** | Multiple | 百位數動畫 |
| **BannerController** | Animation | 橫幅控制器 (含顏色控制) |

### 3. UI 系統節點

#### 3.1 設定頁面 (SettingsPage)

```
SettingsPage
├── SpinBtn (旋轉)
│   ├── SpinAnm (動畫)
│   ├── SpinAnmAuto (自動動畫)
│   └── SpinNum (數字)
├── TurboBtn (加速)
│   └── TurboAnm (動畫)
├── BetLessBtn (減注)
├── BetPlusBtn (加注)
├── AutoButton (自動)
│   ├── AutoAnm (動畫)
│   └── AutoDis (禁用)
└── MenuButton (選單)
    ├── Click (點擊)
    └── VoiceOff (靜音)
```

#### 3.2 資訊控制器 (InfoController)

```
InfoController
├── Credit (點數系統)
│   └── CreditCurrency (貨幣符號)
├── BtnBet (下注顯示)
│   ├── BetBg_On / BetBg_Off (背景切換)
│   ├── Bet (金額)
│   └── BetCurrency (貨幣)
└── WinBtn (獲勝顯示)
    ├── WinBg_On / WinBg_Off (背景切換)
    ├── Win (金額)
    └── WinCurrency (貨幣)
```

### 4. 購買功能系統 (Feature Buy)

```
FeatureBuyPage
├── FeatureBuyPage1 (選擇頁面)
│   └── FeatureStrikeMenu (選單)
│       ├── BuyBtn100 (100% 原價)
│       │   └── FeatureBuyCost100
│       ├── BuyBtn80 (80% 折扣)
│       │   └── FeatureBuyCost80
│       └── BuyBtn60 (60% 折扣)
│           └── FeatureBuyCost60
│
└── FeatureBuyPage2 (確認頁面)
    ├── FeatureBuyText (說明文字)
    ├── FeatureBuyCostNum (成本數字)
    ├── FeatureBuyStartBtn (開始按鈕)
    ├── FeatureBuyTitle (標題)
    ├── FeatureBuyLabel (標籤)
    └── FeatureBuyDiscount (折扣標籤)
```

**購買選項：**
- 100% - 原價購買
- 80% - 8 折優惠
- 60% - 6 折優惠

### 5. 滾動系統 (Scroll System)

```
BetSCroll
├── ScrollR (右側滾動條)
├── ScrollB (底部滾動條)
├── ScrollL (左側滾動條)
└── ScrollT (頂部滾動條)

每個滾動條包含：
├── scrollBar (滾動條)
│   └── bar (滾動條本體)
└── content (內容容器)
    └── view (視圖)
        ├── - (分隔符)
        └── item (項目)
```

**滾動按鈕：**
- ScrollUpR / ScrollDownR (右側上下)
- ScrollUpB / ScrollDownB (底部上下)
- ScrollUpT / ScrollDownT (頂部上下)

### 6. 特效系統

#### 6.1 傳播效果 (Spread)

```
Spread
├── AnmNode (動畫節點集合)
│   ├── ComboLightAnm (光效)
│   ├── ComboSparkAnm (火花)
│   └── ComboNumBeginAnm (數字開始)
├── LineNum (線數顯示)
├── ComboHitBeginAnm (連擊開始)
└── ComboGlowAnm (發光效果)
```

#### 6.2 倍數系統 (Multiple)

```
Multiple
├── MultipleAnm (主動畫)
├── MultipleNum (數字顯示)
├── MultipleNumAnmOnes (個位數)
├── MultipleNumAnmTen (十位數)
└── MultipleNumAnmHundred (百位數)
```

### 7. BannerController 詳細結構

```
Animation > BannerController
├── cc.UITransform
│   ├── Content Size: 136 × 180
│   ├── Anchor Point: 0.5 × 0.5
│   └── Scale: 1 × 1
│
├── sp.Skeleton (Spine 組件)
│   ├── SkeletonData: skeletonMotion.json
│   ├── Default Skin: default
│   ├── Animation: slowmotion
│   ├── Animation Cache Mode: REALTIME
│   ├── Color: FFFFFF (White) → 可控制
│   ├── Premultiplied Alpha: ✓
│   ├── Loop: ✓
│   ├── Time Scale: 1
│   ├── Auto Play: ✓
│   └── CustomMaterial: cc.Material
│
└── SpineAnimationController (自訂腳本)
    ├── Skeleton Data: skeletonMotion.json
    ├── Animation Name: slowmotion
    ├── Play Direction: 1 (Forward)
    ├── Playback Speed: 1
    ├── Loop: ✓
    ├── Auto Play: ✓
    ├── Blend Mode: 0
    ├── Skin Name: default
    ├── Track Index: 0
    │
    └── 🎨 Color Control (顏色控制功能)
        ├── Enable Color Control: ✓
        └── Skeleton Color: RGBA (0-255)
```

**顏色控制機制：**
```
SpineAnimationController.skeletonColor
           ↓
    updateSkeletonColor()
           ↓
    skeleton.color.r/g/b/a = value
           ↓
    markForUpdateRenderData()
           ↓
        Visual Update
```

---

## 節點類型圖例

| 符號 | 類型 | 說明 |
|------|------|------|
| 📦 | Scene | 場景根節點 |
| 📌 | Canvas | UI 畫布 |
| 📷 | Camera | 攝影機 |
| 🎮 | BaseGame | 遊戲主體 |
| 📊 | Layer | 圖層容器 |
| 🎰 | Shake | 搖動容器 |
| 🎡 | Reel | 捲軸系統 |
| 🎭 | Mask | 遮罩節點 |
| 🎯 | Symbol | 符號容器 |
| 🎬 | Animation | 動畫節點 |
| 💎 | UI | 使用者介面 |
| 🎲 | ReelBlack | 捲軸框架 |
| 💰 | BsUI | 基礎 UI |
| 🎁 | Button | 按鈕 |
| ⚙️ | Settings | 設定 |
| 🏠 | Home | 首頁 |
| 🔊 | Voice | 音效 |
| ❓ | Help | 幫助 |
| 📜 | Scroll | 滾動 |
| 🛒 | FeatureBuy | 功能購買 |
| ✨ | Effect | 特效 |
| 🎰 | Multiple | 倍數 |
| 🦴 | Spine | Spine 組件 |
| 📜 | Script | 腳本組件 |

---

## 關鍵路徑快速參考

| 功能 | 節點路徑 |
|------|---------|
| **捲軸系統** | `Canvas > BaseGame > Layer > Shake > Reel` |
| **符號遮罩** | `Reel > reelMask / reelMask2 > symbol` |
| **UI 框架** | `BaseGame > UI > reelBlack` |
| **設定按鈕** | `BaseGame > SettingsPage` |
| **資訊顯示** | `BaseGame > InfoController` |
| **購買功能** | `BaseGame > Page > FeatureBuyPage` |
| **幫助頁面** | `BaseGame > Page > HelpPage` |
| **下注選單** | `BaseGame > Page > BetSCroll` |
| **傳播效果** | `BaseGame > Spread` |
| **倍數系統** | `BaseGame > Multiple` |
| **動畫系統** | `BaseGame > Animation` |
| **橫幅控制** | `BaseGame > Animation > BannerController` |

---

## 腳本組件統計

| 組件類型 | 數量 | 節點 |
|---------|------|------|
| sp.Skeleton (Spine) | 19 | 各種動畫節點 |
| UITransform | 200+ | 幾乎所有節點 |
| Sprite | 100+ | 圖片顯示節點 |
| Button | 30+ | 按鈕節點 |
| ScrollView | 4 | 滾動視圖 |
| Mask | 2+ | 遮罩節點 |
| Label | 50+ | 文字顯示 |
| 自訂腳本 | 10+ | 控制器節點 |

---

## 更新記錄

| 日期 | 內容 |
|------|------|
| 2025-10-27 | 建立完整節點結構圖文檔 |
| 2025-10-27 | 新增 SpineAnimationController 顏色控制功能 |

---

**文檔說明：**
- ✅ 所有節點名稱與 main.scene 文件完全對應
- ✅ 包含完整的層級結構和組件信息
- ✅ 詳細列出所有 Spine 動畫節點
- ✅ 涵蓋所有 UI 系統和功能頁面
- ✅ 記錄所有滾動視圖和特效系統
