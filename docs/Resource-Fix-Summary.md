# ğŸš¨ è³‡æºè¼‰å…¥éŒ¯èª¤ - å•é¡Œåˆ†æèˆ‡è§£æ±ºæ–¹æ¡ˆ

**æ—¥æœŸ**: 2025-10-13  
**åš´é‡ç¨‹åº¦**: ğŸ”´ Critical  
**ç‹€æ…‹**: âœ… å·²å»ºç«‹ä¿®å¾©å·¥å…·

---

## ğŸ“Š è¨ºæ–·çµæœ

### ç™¼ç¾çš„å•é¡Œ

```
âŒ 4 å€‹è³‡æºå•é¡Œ
```

#### 1. ç¼ºå¤±çš„ Sprite è³‡æº (3å€‹)

| è³‡æºåç¨± | UUID | ç‹€æ…‹ |
|---------|------|------|
| miniSpinShow Sprite | `7f4de0b3-fc1b-4f4c-82d1-4d4978483c31` | âŒ å®Œå…¨ç¼ºå¤± |
| miniSpinNotice Sprite | `59a2c4af-6236-452e-be67-8e1bd1016a9a` | âŒ å®Œå…¨ç¼ºå¤± |
| FeatureBuy Button Sprite | `5d25d90c-6781-4e85-8c2e-24532374e271` | âŒ å®Œå…¨ç¼ºå¤± |

**å½±éŸ¿ç¯„åœ**:
- `Canvas/BaseGame/Page/miniSpinNode/miniSpinShow`
- `Canvas/BaseGame/Page/miniSpinNode/miniSpinBg/miniSpinNotice`
- `Canvas/BaseGame/Page/FeatureBuyPage/FeatureBuyPage1/BuyBtn*`

**éŒ¯èª¤è¨Šæ¯**:
```
The asset 7f4de0b3-fc1b-4f4c-82d1-4d4978483c31@f9941 is missing!
The asset 59a2c4af-6236-452e-be67-8e1bd1016a9a@f9941 is missing!
The asset 5d25d90c-6781-4e85-8c2e-24532374e271@f9941 is missing!
```

#### 2. æœªçŸ¥çš„çµ„ä»¶é¡å‹ (1å€‹)

| çµ„ä»¶ ID | ç‹€æ…‹ |
|---------|------|
| `ea630dZsN1HeYme0pj/1VW9` | âŒ åœ¨å ´æ™¯ä¸­ç™¼ç¾ç„¡æ•ˆå¼•ç”¨ |

**å½±éŸ¿ç¯„åœ**: 
- Line 35018 in `main.scene`

**éŒ¯èª¤è¨Šæ¯**:
```
Can not find class 'ea630dZsN1HeYme0pj/1VW9'
```

#### 3. Spine å‹•ç•«éŒ¯èª¤

**éŒ¯èª¤è¨Šæ¯**:
```
Spine: Animation not found: <None>
```

---

## âœ… å·²å»ºç«‹çš„ä¿®å¾©å·¥å…·

### 1. EmergencyResourceFix çµ„ä»¶

**æª”æ¡ˆä½ç½®**: `assets/script/EmergencyResourceFix.ts`

**åŠŸèƒ½**:
- âœ… è‡ªå‹•æƒæå ´æ™¯ä¸­çš„è³‡æºå•é¡Œ
- âœ… è‡ªå‹•ä¿®å¾©æˆ–éš±è—æœ‰å•é¡Œçš„ç¯€é»
- âœ… ç”Ÿæˆè©³ç´°çš„è¨ºæ–·å ±å‘Š
- âœ… æ”¯æ´å‚™ç”¨è³‡æºæŒ‡å®š
- âœ… æ¸…é™¤ç„¡æ•ˆçš„ Spine å‹•ç•«å¼•ç”¨

**ä½¿ç”¨æ–¹å¼**:
```
1. é–‹å•Ÿ Cocos Creator
2. é–‹å•Ÿ main.scene
3. é¸æ“‡ Canvas ç¯€é»
4. æ·»åŠ çµ„ä»¶ â†’ EmergencyResourceFix
5. é…ç½®å±¬æ€§:
   - Auto Fix: âœ…
   - Hide Problematic Nodes: âœ…
   - Log Details: âœ…
6. åŸ·è¡ŒéŠæˆ²
```

### 2. è¨ºæ–·è…³æœ¬

**æª”æ¡ˆä½ç½®**: `fix-resources.ps1`

**åŠŸèƒ½**:
- âœ… è‡ªå‹•æª¢æ¸¬å°ˆæ¡ˆå®Œæ•´æ€§
- âœ… å‚™ä»½å ´æ™¯æª”æ¡ˆ
- âœ… æƒæç¼ºå¤±çš„è³‡æº
- âœ… ç”Ÿæˆè©³ç´°å ±å‘Š
- âœ… å¯é¸æ¸…é™¤å¿«å–

**ä½¿ç”¨æ–¹å¼**:
```powershell
# åŸºæœ¬è¨ºæ–· + å‚™ä»½
.\fix-resources.ps1 -BackupScene

# è¨ºæ–· + å‚™ä»½ + æ¸…é™¤å¿«å–
.\fix-resources.ps1 -BackupScene -CleanCache
```

### 3. æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `docs/EmergencyResourceFix-Guide.md` | çµ„ä»¶è©³ç´°ä½¿ç”¨æŒ‡å— |
| `docs/Resource-Loading-Error-Quick-Fix.md` | å®Œæ•´ä¿®å¾©æ–¹æ¡ˆ (PowerShell è…³æœ¬) |
| `docs/Resource-Missing-Fix-Guide.md` | è³‡æºè¨ºæ–·æµç¨‹ |
| `docs/Resource-Fix-Summary.md` | æœ¬æ–‡ä»¶ (å•é¡Œç¸½çµ) |

---

## ğŸ¯ æ¨è–¦ä¿®å¾©æµç¨‹

### æ–¹æ¡ˆ A: å¿«é€Ÿä¿®å¾© (5åˆ†é˜)

**é©ç”¨æƒ…æ³**: ç·Šæ€¥ä¸Šç·š,éœ€è¦ç«‹å³è®“éŠæˆ²å¯ä»¥åŸ·è¡Œ

1. **åŸ·è¡Œè¨ºæ–·è…³æœ¬**:
   ```powershell
   .\fix-resources.ps1 -BackupScene
   ```

2. **ä½¿ç”¨ä¿®å¾©çµ„ä»¶**:
   - é–‹å•Ÿ Cocos Creator
   - åœ¨ Canvas ç¯€é»æ·»åŠ  `EmergencyResourceFix` çµ„ä»¶
   - å•Ÿç”¨ `Auto Fix` å’Œ `Hide Problematic Nodes`
   - åŸ·è¡ŒéŠæˆ²

3. **é©—è­‰**:
   - æª¢æŸ¥ Console æ˜¯å¦é‚„æœ‰éŒ¯èª¤
   - æ¸¬è©¦åŸºæœ¬åŠŸèƒ½

**çµæœ**: éŠæˆ²å¯ä»¥åŸ·è¡Œ,ä½†æœ‰å•é¡Œçš„ç¯€é»æœƒè¢«éš±è—

---

### æ–¹æ¡ˆ B: å¾¹åº•ä¿®å¾© (30åˆ†é˜)

**é©ç”¨æƒ…æ³**: æœ‰æ™‚é–“é€²è¡Œå®Œæ•´ä¿®å¾©,å¸Œæœ›æ¢å¾©æ‰€æœ‰åŠŸèƒ½

1. **è¨ºæ–·**:
   ```powershell
   .\fix-resources.ps1 -BackupScene
   ```

2. **é‚„åŸè³‡æº** (é¸æ“‡ä¸€ç¨®):
   
   **é¸é … 1: å¾ç‰ˆæœ¬æ§åˆ¶é‚„åŸ**
   ```powershell
   # æª¢æŸ¥ Git æ­·å²
   git log --oneline --all -- assets/**/*.png
   
   # æ‰¾åˆ°è³‡æºè¢«åˆªé™¤çš„ commit
   git diff <commit-id>^ <commit-id> -- assets/
   
   # é‚„åŸç‰¹å®šæª”æ¡ˆ
   git checkout <commit-id> -- assets/path/to/missing-file.png
   ```
   
   **é¸é … 2: å¾å‚™ä»½é‚„åŸ**
   - æ‰¾åˆ°æœ€è¿‘çš„å‚™ä»½
   - è¤‡è£½ç¼ºå¤±çš„åœ–ç‰‡æª”æ¡ˆåˆ° `assets/` å°æ‡‰ä½ç½®
   - Cocos Creator æœƒè‡ªå‹•é‡æ–°ç”Ÿæˆ meta æª”æ¡ˆ
   
   **é¸é … 3: é‡æ–°å»ºç«‹**
   - åœ¨ Cocos Creator ä¸­é‡æ–°åŒ¯å…¥åœ–ç‰‡
   - åœ¨å ´æ™¯ä¸­é‡æ–°æŒ‡å®šè³‡æº

3. **æ¸…é™¤ç„¡æ•ˆå¼•ç”¨**:
   - é–‹å•Ÿ `main.scene` (line 35018)
   - ç§»é™¤æœªçŸ¥çµ„ä»¶ `ea630dZsN1HeYme0pj/1VW9`
   
   æˆ–ä½¿ç”¨ç·¨è¼¯å™¨:
   - æœå°‹æ›è¼‰äº† Missing çµ„ä»¶çš„ç¯€é»
   - ç§»é™¤è©²çµ„ä»¶

4. **æ¸…é™¤å¿«å–ä¸¦é‡å»º**:
   ```powershell
   .\fix-resources.ps1 -BackupScene -CleanCache
   ```

5. **æ¸¬è©¦**:
   - é‡æ–°é–‹å•Ÿ Cocos Creator
   - é–‹å•Ÿ main.scene
   - åŸ·è¡ŒéŠæˆ²
   - å®Œæ•´æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½

**çµæœ**: æ‰€æœ‰è³‡æºæ¢å¾©æ­£å¸¸,åŠŸèƒ½å®Œæ•´

---

## ğŸ” æ ¹æœ¬åŸå› åˆ†æ

### ç‚ºä»€éº¼æœƒç™¼ç”Ÿé€™å€‹å•é¡Œ?

1. **è³‡æºæª”æ¡ˆè¢«åˆªé™¤**:
   - èª¤æ“ä½œåˆªé™¤
   - ç‰ˆæœ¬æ§åˆ¶è¡çª
   - SVN/Git åŒæ­¥å•é¡Œ

2. **Meta æª”æ¡ˆéºå¤±**:
   - ç‰ˆæœ¬æ§åˆ¶æœªè¿½è¹¤ .meta æª”æ¡ˆ
   - æ‰‹å‹•åˆªé™¤ meta å°è‡´ UUID è®Šæ›´

3. **å°ˆæ¡ˆé·ç§»**:
   - å¾å…¶ä»–å°ˆæ¡ˆè¤‡è£½å ´æ™¯
   - è³‡æºè·¯å¾‘æ”¹è®Š

4. **æœªçŸ¥çµ„ä»¶**:
   - è…³æœ¬è¢«åˆªé™¤æˆ–é‡å‘½å
   - è…³æœ¬ UUID æ”¹è®Š
   - Meta æª”æ¡ˆæå£

### é é˜²æªæ–½

1. **ç‰ˆæœ¬æ§åˆ¶**:
   ```gitignore
   # ç¢ºä¿ .gitignore ä¸æœƒå¿½ç•¥ .meta æª”æ¡ˆ
   # âŒ éŒ¯èª¤
   *.meta
   
   # âœ… æ­£ç¢º (åªå¿½ç•¥ library ä¸­çš„ meta)
   /library/**/*.meta
   /temp/**/*.meta
   ```

2. **åˆªé™¤è³‡æºå‰æª¢æŸ¥**:
   ```powershell
   # åˆªé™¤å‰æœå°‹å¼•ç”¨
   $uuid = "your-uuid-here"
   Get-ChildItem -Path "assets" -Recurse -Include "*.scene","*.prefab" |
       Where-Object { (Get-Content $_.FullName -Raw) -match $uuid }
   ```

3. **ä½¿ç”¨è³‡æºç®¡ç†å·¥å…·**:
   - Cocos Creator çš„ã€Œè³‡æºç®¡ç†å™¨ã€ä¸­åˆªé™¤,è€Œä¸æ˜¯ç›´æ¥åˆªé™¤æª”æ¡ˆ
   - ä½¿ç”¨ã€ŒæŸ¥æ‰¾å¼•ç”¨ã€åŠŸèƒ½ç¢ºèªæ²’æœ‰å…¶ä»–åœ°æ–¹ä½¿ç”¨

4. **å®šæœŸå‚™ä»½**:
   - æ¯æ—¥å‚™ä»½ `assets/` ç›®éŒ„
   - ä½¿ç”¨ Git è¿½è¹¤æ‰€æœ‰è®Šæ›´

---

## ğŸ“ å¸¸è¦‹å•é¡Œ

### Q1: åŸ·è¡Œä¿®å¾©çµ„ä»¶å¾Œ,æŒ‰éˆ•æ¶ˆå¤±äº†?

**A**: é€™æ˜¯æ­£å¸¸çš„ã€‚å› ç‚ºè³‡æºæª”æ¡ˆç¢ºå¯¦ç¼ºå¤±,çµ„ä»¶é¸æ“‡éš±è—ç¯€é»ä»¥é¿å…éŒ¯èª¤ã€‚

**è§£æ±ºæ–¹æ¡ˆ**:
- å¾å‚™ä»½é‚„åŸè³‡æº
- æˆ–åœ¨ç·¨è¼¯å™¨ä¸­é‡æ–°æŒ‡å®šè³‡æº
- æˆ–ä½¿ç”¨ `fallbackSprite` å±¬æ€§æŒ‡å®šä¸€å€‹é è¨­åœ–ç‰‡

---

### Q2: æˆ‘ä¸çŸ¥é“åŸå§‹è³‡æºé•·ä»€éº¼æ¨£å­?

**A**: å¯ä»¥å¾ä»¥ä¸‹åœ°æ–¹æ‰¾:

1. **Git æ­·å²**:
   ```powershell
   git log --all --full-history -- assets/**/*.png
   git show <commit-id>:assets/path/to/file.png > recovered.png
   ```

2. **å‚™ä»½è³‡æ–™å¤¾**

3. **åœ˜éšŠæˆå“¡çš„æœ¬åœ°å°ˆæ¡ˆ**

4. **æ¸¬è©¦ä¼ºæœå™¨æˆ–æ‰“åŒ…çš„ç‰ˆæœ¬** (å¾ build ç›®éŒ„åæ¨)

---

### Q3: ä¿®å¾©å¾Œé‚„æ˜¯æœ‰éŒ¯èª¤?

**A**: è«‹åŸ·è¡Œå®Œæ•´è¨ºæ–·:

```powershell
# æ¸…é™¤å¿«å–é‡æ–°è¨ºæ–·
.\fix-resources.ps1 -BackupScene -CleanCache

# æª¢æŸ¥æ˜¯å¦é‚„æœ‰å…¶ä»–éŒ¯èª¤
Get-Content "temp/logs/main.log" | Select-String "error|missing"
```

---

### Q4: å¯ä»¥ç›´æ¥ç·¨è¼¯ .scene æª”æ¡ˆå—?

**A**: å¯ä»¥,ä½†éœ€è¦éå¸¸å°å¿ƒ:

1. **ä¸€å®šè¦å‚™ä»½**:
   ```powershell
   Copy-Item "assets/scene/main.scene" "assets/scene/main.scene.backup"
   ```

2. **ç¢ºä¿ JSON æ ¼å¼æ­£ç¢º**

3. **ä¿®æ”¹å¾Œåœ¨ç·¨è¼¯å™¨ä¸­é©—è­‰**

4. **å»ºè­°ä½¿ç”¨ç·¨è¼¯å™¨çš„ UI æ“ä½œ,è€Œä¸æ˜¯ç›´æ¥ç·¨è¼¯æ–‡å­—**

---

## ğŸ“ˆ ç›£æ§èˆ‡ç¶­è­·

### å®šæœŸå¥åº·æª¢æŸ¥

å°‡è¨ºæ–·è…³æœ¬åŠ å…¥ CI/CD æµç¨‹:

```powershell
# åœ¨ pre-commit hook ä¸­åŸ·è¡Œ
.\fix-resources.ps1

# å¦‚æœç™¼ç¾å•é¡Œ,é˜»æ­¢ commit
if ($LASTEXITCODE -ne 0) {
    Write-Error "ç™¼ç¾è³‡æºå•é¡Œ,è«‹å…ˆä¿®å¾©"
    exit 1
}
```

### è³‡æºå®Œæ•´æ€§å ±å‘Š

å®šæœŸåŸ·è¡Œä¸¦ä¿å­˜å ±å‘Š:

```powershell
.\fix-resources.ps1 -BackupScene > "logs/resource-check-$(Get-Date -Format 'yyyyMMdd').log"
```

---

## âœ¨ ç¸½çµ

| é …ç›® | ç‹€æ…‹ |
|------|------|
| å•é¡Œè­˜åˆ¥ | âœ… å®Œæˆ (4å€‹å•é¡Œ) |
| è¨ºæ–·å·¥å…· | âœ… å·²å»ºç«‹ (PowerShell è…³æœ¬) |
| ä¿®å¾©çµ„ä»¶ | âœ… å·²å»ºç«‹ (EmergencyResourceFix.ts) |
| æ–‡ä»¶æ’°å¯« | âœ… å®Œæˆ (4ä»½æ–‡ä»¶) |
| å ´æ™¯å‚™ä»½ | âœ… å·²å‚™ä»½ |
| å¿«é€Ÿä¿®å¾© | â³ ç­‰å¾…åŸ·è¡Œ |
| å¾¹åº•ä¿®å¾© | â³ ç­‰å¾…è³‡æºé‚„åŸ |

---

**ä¸‹ä¸€æ­¥è¡Œå‹•**:

1. âœ… **ç«‹å³**: åœ¨ Cocos Creator ä¸­ä½¿ç”¨ EmergencyResourceFix çµ„ä»¶è®“éŠæˆ²å¯ä»¥åŸ·è¡Œ
2. â³ **æœ¬é€±å…§**: å¾å‚™ä»½é‚„åŸç¼ºå¤±çš„è³‡æºæª”æ¡ˆ
3. â³ **æŒçºŒ**: å»ºç«‹è³‡æºç®¡ç†æµç¨‹,é¿å…å•é¡Œå†æ¬¡ç™¼ç”Ÿ

---

**ç›¸é—œæ–‡ä»¶**:
- [EmergencyResourceFix ä½¿ç”¨æŒ‡å—](./EmergencyResourceFix-Guide.md)
- [è©³ç´°ä¿®å¾©æ–¹æ¡ˆ](./Resource-Loading-Error-Quick-Fix.md)
- [è³‡æºè¨ºæ–·æŒ‡å—](./Resource-Missing-Fix-Guide.md)

---

**æœ€å¾Œæ›´æ–°**: 2025-10-13 16:24
