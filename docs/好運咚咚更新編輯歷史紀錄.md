# Cocos Creator 編輯歷史

## 節點結構圖 (Scene Hierarchy)

```
📦 Scene [main]
│
├── 📌 Canvas
│   ├── � Camera
│   │
│   ├── � BaseGame
│   │   └── 📊 Layer
│   │       ├── 🎰 Shake
│   │       │   ├── BS_bg
│   │       │   │
│   │       │   └── 🎡 Reel
│   │       │       ├── reelBaseColor  
│   │       │       ├── reelFrame
│   │       │       │
│   │       │       ├── 🎭 reelMask    
│   │       │       │   └── 🎯 symbol
│   │       │       │       ├── HL (High Light)
│   │       │       │       │
│   │       │       │       └── 🎬 Anm (Animation)
│   │       │       │           ├── WildNumber
│   │       │       │           ├── lowSymAnm
│   │       │       │           ├── particle
│   │       │       │           └── change
│   │       │       │
│   │       │       └── 🎭 reelMask2
│   │       │           └── 🎯 symbol
│   │       │               ├── HL (High Light)
│   │       │               │
│   │       │               └── 🎬 Anm (Animation)
│   │       │                   └── WildNumber
│   │       │
│   │       └── 💎 UI
│   │           ├── 🎲 reelBlack
│   │           │   ├── reel0
│   │           │   ├── reel1
│   │           │   ├── reel2
│   │           │   ├── reel3
│   │           │   └── reel4
│   │           │
│   │           ├── BkgAnm
│   │           ├── BkgAnmFs
│   │           │
│   │           └── 💰 BsUI
│   │               └── 🎁 FeatureBuyButton
│   │                   └── FeatureBuyAnm
│   │
│   ├── ⚙️ SettingsPage (設定頁面)
│   │   ├── 🎯 SpinBtn (旋轉按鈕)
│   │   │   ├── SpinAnm (旋轉動畫 - Spine)
│   │   │   ├── SpinAnmAuto (自動旋轉動畫 - Spine)
│   │   │   └── SpinNum (數字顯示)
│   │   │
│   │   ├── ⚡ TurboBtn (加速按鈕)
│   │   │   └── TurboAnm (加速動畫 - Spine)
│   │   │
│   │   ├── 🔽 BetLessBtn (減少注額按鈕)
│   │   ├── 🔼 BetPlusBtn (增加注額按鈕)
│   │   │
│   │   ├── 🔄 AutoButton (自動按鈕)
│   │   │   ├── AutoAnm (自動動畫 - Spine)
│   │   │   └── AutoDis (禁用狀態)
│   │   │
│   │   └── 📋 MenuButton (選單按鈕)
│   │       ├── Click (點擊效果)
│   │       └── VoiceOff (靜音圖示)
│   │
│   ├── ⚙️ SettingsPage2 (設定頁面 2)
│   │   ├── SetBlock (遮罩)
│   │   ├── 🏠 HomeButton (首頁按鈕)
│   │   ├── 🔊 VoiceButton (音量按鈕)
│   │   ├── ❓ HelpButton (幫助按鈕)
│   │   ├── 📜 HistoryButton (歷史按鈕)
│   │   └── ❌ CancelButton (取消按鈕)
│   │
│   ├── 🎊 FSUI (Free Spin UI)
│   │   ├── FreeSpinNum (免費旋轉次數)
│   │   ├── FreeSpinNum_1 (次數顯示 1)
│   │   └── FreeSpinNum_2 (次數顯示 2)
│   │
│   ├── ℹ️ InfoController (資訊控制器)
│   │   ├── 💰 Credit (點數)
│   │   │   └── CreditCurrency (貨幣符號)
│   │   │
│   │   ├── 🎲 BtnBet (下注按鈕)
│   │   │   ├── BetBg_On (下注背景-開啟)
│   │   │   ├── BetBg_Off (下注背景-關閉)
│   │   │   ├── Bet (下注金額)
│   │   │   └── BetCurrency (下注貨幣)
│   │   │
│   │   ├── 🏆 WinBtn (獲勝按鈕)
│   │   │   ├── WinBg_On (獲勝背景-開啟)
│   │   │   ├── WinBg_Off (獲勝背景-關閉)
│   │   │   ├── Win (獲勝金額)
│   │   │   └── WinCurrency (獲勝貨幣)
│   │   │
│   │   └── 🎯 GameWay (遊戲方式)
│   │
│   ├── 🔄 AutoPage (自動頁面)
│   │
│   ├── 📄 Page (頁面容器)
│   │   ├── 🛡️ FeatureBuyBlock (功能購買遮罩)
│   │   │
│   │   ├── 🛒 FeatureBuyPage (功能購買頁面)
│   │   │   ├── FeatureBuyPage1 (購買頁面 1)
│   │   │   │   ├── FeatureBuyCloseBtn1 (關閉按鈕 1)
│   │   │   │   └── FeatureStrikeMenu (功能選單)
│   │   │   │       ├── BuyBtnAnm (購買按鈕動畫 - Spine)
│   │   │   │       ├── BuyBtn100 (購買按鈕 100%)
│   │   │   │       │   └── FeatureBuyCost100 (成本 100)
│   │   │   │       ├── BuyBtn80 (購買按鈕 80%)
│   │   │   │       │   └── FeatureBuyCost80 (成本 80)
│   │   │   │       └── BuyBtn60 (購買按鈕 60%)
│   │   │   │           └── FeatureBuyCost60 (成本 60)
│   │   │   │
│   │   │   └── FeatureBuyPage2 (購買頁面 2)
│   │   │       ├── FeatureBuyCloseBtn2 (關閉按鈕 2)
│   │   │       ├── FeatureBuyBackBtn (返回按鈕)
│   │   │       ├── FeatureBuyText (購買文字)
│   │   │       ├── FeatureBuyCostNum (成本數字)
│   │   │       ├── FeatureBuyBackBtn2 (返回按鈕 2)
│   │   │       ├── BuyBtnAnm2 (購買按鈕動畫 2 - Spine)
│   │   │       ├── FeatureBuyStartBtn (開始按鈕)
│   │   │       ├── FeatureBuyTitle (購買標題)
│   │   │       ├── FeatureBuyLabel (購買標籤)
│   │   │       ├── FeatureBuyDiscount (折扣標籤)
│   │   │       └── FeatureBuyTtileAnm (標題動畫 - Spine)
│   │   │
│   │   ├── ❓ HelpPage (幫助頁面)
│   │   │   ├── HelpBg (幫助背景)
│   │   │   │   ├── Bg (背景)
│   │   │   │   ├── Title (標題)
│   │   │   │   ├── Notice (公告)
│   │   │   │   ├── Page_01 (頁面 01)
│   │   │   │   ├── Page_02 (頁面 02)
│   │   │   │   ├── Page_03 (頁面 03)
│   │   │   │   ├── Page_04 (頁面 04)
│   │   │   │   └── Page_06 (頁面 06)
│   │   │   │
│   │   │   ├── HelpButtons (幫助按鈕組)
│   │   │   │   ├── Back (返回)
│   │   │   │   ├── PrevPage (上一頁)
│   │   │   │   └── NextPage (下一頁)
│   │   │   │
│   │   │   ├── FaLabel (標籤組)
│   │   │   │   └── 1 (標籤 1)
│   │   │   │
│   │   │   └── GameVersion (遊戲版本)
│   │   │
│   │   └── 📜 BetSCroll (下注滾動頁面)
│   │       ├── Block (遮罩 1)
│   │       ├── Block2 (遮罩 2)
│   │       ├── ScrollBg (滾動背景)
│   │       │   ├── text1 (文字 1)
│   │       │   ├── text2 (文字 2)
│   │       │   └── line (分隔線)
│   │       │
│   │       ├── 📊 ScrollR (右側滾動)
│   │       │   ├── scrollBar (滾動條)
│   │       │   │   └── bar (滾動條本體)
│   │       │   └── content (內容容器)
│   │       │       └── view (視圖)
│   │       │           ├── - (分隔符)
│   │       │           └── item (項目)
│   │       │
│   │       ├── 📊 ScrollB (底部滾動)
│   │       │   ├── scrollBar (滾動條)
│   │       │   │   └── bar (滾動條本體)
│   │       │   └── content (內容容器)
│   │       │       └── view (視圖)
│   │       │           ├── - (分隔符)
│   │       │           └── item (項目)
│   │       │
│   │       ├── 📊 ScrollL (左側滾動)
│   │       │   ├── scrollBar (滾動條)
│   │       │   │   └── bar (滾動條本體)
│   │       │   └── content (內容容器)
│   │       │       └── view (視圖)
│   │       │           ├── - (分隔符)
│   │       │           └── item (項目)
│   │       │
│   │       ├── 📊 ScrollT (頂部滾動)
│   │       │   ├── scrollBar (滾動條)
│   │       │   │   └── bar (滾動條本體)
│   │       │   └── content (內容容器)
│   │       │       └── view (視圖)
│   │       │           ├── - (分隔符)
│   │       │           └── item (項目)
│   │       │
│   │       ├── ScrollBtn (滾動按鈕組)
│   │       │   ├── ScrollUpR (右上滾動)
│   │       │   ├── ScrollDownR (右下滾動)
│   │       │   ├── ScrollUpB (底部上滾動)
│   │       │   ├── ScrollDownB (底部下滾動)
│   │       │   ├── ScrollUpT (頂部上滾動)
│   │       │   └── ScrollDownT (頂部下滾動)
│   │       │
│   │       ├── MaxBetAnm (最大下注動畫 - Spine)
│   │       ├── MaxBetTxt (最大下注文字)
│   │       ├── MaxBetAlpha (最大下注透明度)
│   │       ├── BetCheck (下注確認)
│   │       ├── BtnClose (關閉按鈕)
│   │       └── MaxBetNum (最大下注數字)
│   │
│   ├── 📢 MessageController (訊息控制器)
│   │   ├── paytableBgLeft (賠率表背景左)
│   │   └── paytableBgRight (賠率表背景右)
│   │
│   ├── ✨ Spread (傳播效果系統)
│   │   └── Spread (傳播容器)
│   │       ├── AnmNode (動畫節點)
│   │       │   ├── ComboLightAnm (連擊光效動畫 - Spine)
│   │       │   ├── ComboSparkAnm (連擊火花動畫 - Spine)
│   │       │   └── ComboNumBeginAnm (連擊數字開始動畫 - Spine)
│   │       │
│   │       ├── LineNum (線數)
│   │       │   ├── Node1 (節點 1)
│   │       │   └── LineSpread (線傳播)
│   │       │
│   │       ├── ComboHitBeginAnm (連擊開始動畫 - Spine)
│   │       └── ComboGlowAnm (連擊發光動畫 - Spine)
│   │
│   ├── 🎰 Multiple (倍數系統)
│   │   ├── MultipleAnm (倍數動畫 - Spine)
│   │   ├── MultipleNum (倍數數字)
│   │   ├── MultipleNumAnmOnes (個位數動畫 - Spine)
│   │   ├── MultipleNumAnmTen (十位數動畫 - Spine)
│   │   └── MultipleNumAnmHundred (百位數動畫 - Spine)
│   │
│   └── 🎬 Animation (動畫系統)
│       ├── bkg (背景)
│       ├── ScreenSlowmote (慢動作效果)
│       ├── ComboAnm (連擊動畫)
│       │
│       ├── SymbolAnm (符號動畫組)
│       │   ├── DropSlow (掉落慢動作)
│       │   │   ├── Node0 (節點 0)
│       │   │   ├── Node1 (節點 1)
│       │   │   └── Node2 (節點 2)
│       │   │
│       │   ├── Acvtive (啟動效果)
│       │   ├── SymbolScatter (Scatter 符號)
│       │   ├── reelSlow (捲軸慢動作)
│       │   └── SymbolDragon (龍符號)
│       │
│       └── 📜 BannerController (橫幅控制器)
│           ├── 🦴 sp.Skeleton [Spine Component]
│           │   ├── SkeletonData: skeletonMotion.json
│           │   ├── Animation: slowmotion
│           │   ├── Color: FFFFFF → Dynamic
│           │   └── CustomMaterial: cc.Material
│           │
│           └── 📜 SpineAnimationController.ts
│               ├── ✅ Enable Color Control
│               ├── 🎨 Skeleton Color: RGBA
│               ├── 🎬 Animation Control
│               ├── ⏩ Playback Speed
│               └── 🔄 Loop Settings
```

### 核心節點詳細說明

#### 1. BaseGame > Layer > Shake
```
Shake (搖動容器)
├── BS_bg (背景)
└── Reel (捲軸主體)
    ├── reelBaseColor (底色)
    ├── reelFrame (框架)
    ├── reelMask (遮罩 1)
    │   └── symbol (符號容器)
    │       ├── HL (高亮效果)
    │       └── Anm (動畫組)
    │           ├── WildNumber (Wild 數字)
    │           ├── lowSymAnm (低級符號動畫)
    │           ├── particle (粒子效果)
    │           └── change (變換效果)
    │
    └── reelMask2 (遮罩 2)
        └── symbol (符號容器)
            ├── HL (高亮效果)
            └── Anm (動畫組)
                └── WildNumber (Wild 數字)
```

#### 2. UI Layer
```
UI (使用者介面層)
├── reelBlack (捲軸黑框)
│   ├── reel0 (捲軸 0)
│   ├── reel1 (捲軸 1)
│   ├── reel2 (捲軸 2)
│   ├── reel3 (捲軸 3)
│   └── reel4 (捲軸 4)
│
├── BkgAnm (背景動畫)
├── BkgAnmFs (全屏背景動畫)
│
└── BsUI (基礎 UI)
    └── FeatureBuyButton (功能購買按鈕)
        └── FeatureBuyAnm (購買動畫)
```

### 節點類型圖示說明

| 圖示 | 節點類型 | 描述 |
|------|----------|------|
| 📦 | Scene Root | 場景根節點 |
| 📌 | Canvas | UI 畫布 |
| 📷 | Camera | 攝影機 |
| 🎮 | BaseGame | 遊戲主體 |
| 📊 | Layer | 圖層容器 |
| 🎰 | Shake | 搖動效果容器 |
| 🎡 | Reel | 捲軸系統 |
| 🎭 | Mask | 遮罩節點 |
| 🎯 | Symbol | 符號容器 |
| 🎬 | Animation | 動畫節點 |
| 💎 | UI | 使用者介面 |
| 🎲 | ReelBlack | 捲軸框架 |
| 💰 | BsUI | 基礎 UI 系統 |
| 🎁 | Button | 按鈕組件 |

### SpineAnimationController 範例節點

```
📜 BannerController [SpineAnimationController]
├── ⚙️ cc.UITransform
│   ├── Content Size: 136 × 180
│   └── Anchor Point: 0.5, 0.5
│
├── 🦴 sp.Skeleton
│   ├── SkeletonData: skeletonMotion.json
│   ├── Animation: slowmotion
│   ├── Color: FFFFFF → 0014FF (可控制)
│   └── CustomMaterial: cc.Material
│
└── 📜 SpineAnimationController.ts
    ├── Enable Color Control: ✓
    ├── Skeleton Color: 0014FF (Blue)
    ├── Play Direction: 1
    ├── Playback Speed: 1
    └── Loop: ✓
```

---

## 待完成 (Not Yet)

### UI 組件

#### Feature Buy Button
- **路徑**: UI > BSUI > FeatureBuyButton
- **類型**: Spine

#### Settings Page

##### Spin Button
- **路徑**: SettingsPage > SpinBtn
- **子組件**:
  - SpinAnm (Spine)
  - SpinAnmAuto (Spine)

##### Turbo Button
- **路徑**: SettingsPage > TurboBtn
- **動畫**: TurboAnm (Spine)

##### Auto Button
- **路徑**: SettingsPage > AutoButton
- **動畫**: AutoAnm (Spine)

### 傳播效果 (Spread)

#### Multiple Component
- **路徑**: Multiple
- **子組件**:
  - MultipleAnm (Spine)
  - MultipleNum (Spine)
  - MultioleNumAnmOnes (Spine)
  - MultioleNumAnmTens (Spine)
  - MultioleNumAnmHundreds (Spine)
  - MultioleNumAnmThousands (Spine)

### 動畫和橫幅

#### Banner Controller
- **路徑**: Animation > BannerController
- **動畫**:
  - FiveLineAnm (Spine)
  - BannerWin (Spine)
  - WinBarAnm (Spine)
  - WinNumAnm (Spine)

#### Symbol Pay Table
- **路徑**: Animation > SymbolPayTable
- **組件**:
  - HelpNumber1 (Font)

### 基礎遊戲

#### Transition
- **路徑**: BaseGame > Trans
- **類型**: Spine
- **子組件**:
  - TransBtn (Sprite)

#### Feature Buy Page
- **路徑**: BaseGame > Page > FeatureBuyPage
- **類型**: Sprite (infoBg)

##### Feature Buy Page 1
- **路徑**: BaseGame > Page > FeatureBuyPage > FeatureBuyPage1
- **組件**: BuyBtnAnm (Spine)

##### Feature Buy Page 2
- **路徑**: BaseGame > Page > FeatureBuyPage > FeatureBuyPage2
- **組件**:
  - FeatureBuyText (Sprite - txtCost)
  - FeatureBuyBackBtn2 (Sprite)
  - FeatureBuyStartBtn (Sprite)
  - FeatureBuyLabel (Sprite - featurebuyTxt)
  - FeatureBuyDiscount (Sprite - featurebuyDiscount)

##### HelpPage
- **路徑**: BaseGame > Page > HelpPage
- **類型**: Sprite (helpBg)
- **組件**: HelpBg
- **子組件**: Notice (Sprite) 欠缺



#### Marquee
  無素材

#### Ucoin
  無素材


#### Activity
  無素材

#### JackPot
  無素材

#### AudioController
  無素材









# assets 資料夾

#### language > 語系 > anm 
  無素材

#### language > 語系 > UCoin 
  無素材








####  animaiton asset

symbol_00 ✅⚠️ 模糊
symbol_01 ✅⚠️
symbol_02 ✅⚠️
symbol_03 ✅⚠️
symbol_04 ✅⚠️
symbol_05 ❌
symbol_06 ✅⚠️
symbol_07 ✅⚠️
symbol_08 ✅⚠️
symbol_09 ✅⚠️
symbol_10 ✅⚠️
symbol_11 ✅⚠️


win_bar ✅


bkg ✅⚠️ 包入背景?
bkg_fx  ✅⚠️ bs_idle 燈 猜左邊一組
              bs_slow_begin 不要燈
              bs_slow_demo 燈 shine 拆開，燈留左邊一組
              bs_slow_loop 燈 shine 拆開，燈留左邊一組
              bs_win_begin 

character 3D

loading_btn ❌
loading_round ❌

luckystrike ✅
luckystrike_info ✅⚠️ 背景圖拆開，只留掃光一組
slowmotion ✅
spin ❌
null_trans ❌
null_trans_won ❌
trans ✅⚠️ 只做 fade in/out?
trans_won ✅⚠️ 只做 fade in/out?
UI  ✅⚠️??
  auto ?
  max_bet ?


Win ✅


symbol_05 ❌
loading_btn ❌
loading_round ❌
spin ❌
null_trans ❌
null_trans_won ❌







asset/animation/

fadein 
fadein&out
fadeout
fadeOutShape
fadeOutText
finishLoop
layerShake    ✅ , Canvas/BaseGame  , used shader?
scaleIn
SceneJumpWinTxt
sceneOut




```

---

## 🔧 開發模式關閉記錄 (Development Mode - Disabled Features)

### CommonLibScript.ts - update() 方法

當前已關閉的功能（開發模式中暫時禁用）：

#### 📍 File: `game169/assets/script/LibCreator/libScript/CommonLibScript.ts`
#### 📍 Lines: 257-272

```typescript
protected update(deltaTime: number) {
    // 【性能優化】只在第一次穩定時設置幀率，之後完全跳過此邏輯
    if (!this.initFps && deltaTime < 0.01) {
        game.frameRate = 59;
        this.initFps = true;
        console.log("[CommonLibScript] ✓ 遊戲幀率已設置為 59 FPS");
        return;
    }
    
    // ❌ 已關閉 - 試玩模式位置更新
    //this.updateDemoPosition();  //開發模式先關閉
    
    // ❌ 已關閉 - UI 衝突管理
    // this.preventUIConflict();     //開發模式先關閉
}
```

### 關閉的功能詳細說明

| 功能 | 方法 | 原因 | 狀態 |
|-----|-----|------|------|
| **試玩模式位置更新** | `updateDemoPosition()` | 等待 DEMO 標籤初始化完成 | 🟡 禁用中 |
| **UI 衝突管理** | `preventUIConflict()` | 等待 WebView 和 InfoBg 初始化 | 🟡 禁用中 |

### 已禁用的 onLoad() 初始化功能

#### 📍 Lines: 29-62

以下功能在 `onLoad()` 中被註解掉：

```typescript
protected onLoad(): void {
    // ... 其他初始化代碼 ...
    
    // ❌ 已禁用
    // this.handleKeyboard();      // 鍵盤快捷鍵控制（空白鍵/Enter）
    // this.handleAccountSn();     // 帳號序號顯示
    // this.handleDemoMode();      // 試玩模式設置
    // this.handleGameVersion();   // 遊戲版號顯示
}
```

### 各功能啟用步驟

#### 1. 啟用試玩模式位置更新
```typescript
// 取消註解此行（Line ~271）
this.updateDemoPosition();  // 開發模式先關閉 → 已啟用
```
**前置條件：**
- ✅ CommonLibScript 已初始化
- ✅ demoString 節點已建立
- ✅ AllNode.Data.Map 已掃描完畢

#### 2. 啟用 UI 衝突管理
```typescript
// 取消註解此行（Line ~273）
this.preventUIConflict();     // 開發模式先關閉 → 已啟用
```
**前置條件：**
- ✅ WebView 節點存在
- ✅ InfoBg 節點存在

#### 3. 啟用鍵盤控制
```typescript
// 在 onLoad() 中取消註解（Line ~47）
this.handleKeyboard();      // 新增空白鍵和 Enter 鍵來旋轉
```
**功能：**
- Space 鍵 → 觸發旋轉
- Enter 鍵 → 觸發旋轉

#### 4. 啟用帳號序號顯示
```typescript
// 在 onLoad() 中取消註解（Line ~50）
this.handleAccountSn();     // 新增帳號序號
```
**條件：**
- `window.psapi?.hostInfo?.history_sn_enable === true`
- 非試玩模式 (`pm !== '1'`)

#### 5. 啟用試玩模式
```typescript
// 在 onLoad() 中取消註解（Line ~53）
this.handleDemoMode();      // 試玩模式
```
**條件：**
- URL 參數 `pm=1`

#### 6. 啟用遊戲版號顯示
```typescript
// 在 onLoad() 中取消註解（Line ~56）
this.handleGameVersion();   // 遊戲版號
```
**功能：**
- 優先使用 psapi 伺服器版本號
- 備用本地版本號 "ver123 build 1234"

### 關閉原因分析

#### 試玩模式邏輯
```
✅ 已完成功能：
- 試玩模式 DEMO 文字創建
- DEMO 文字基本位置設置

🔴 暫時禁用原因：
- 動態位置更新依賴 BetSCroll、AutoPage 等節點
- 這些節點的初始化時序需要驗證
- 避免每幀都執行不必要的位置計算
```

#### UI 衝突管理
```
✅ 已完成功能：
- 防止 WebView 和錯誤訊息同時顯示

🔴 暫時禁用原因：
- 等待場景完全加載
- WebView 節點可能在運行時動態創建
- 需要驗證 InfoBg 節點是否持續存在
```

### 測試清單

啟用各功能前，請確認以下事項：

- [ ] CommonLibScript 掛載在正確的場景節點
- [ ] AllNode.Data.Map 已正確掃描所有節點
- [ ] 相依的節點已在場景中建立
- [ ] URL 參數正確（試玩模式需要 `pm=1`）
- [ ] 控制台日誌無報錯信息
- [ ] 幀率已正確設置為 59 FPS

### 後續待辦

- [ ] 驗證試玩模式位置更新邏輯
- [ ] 測試 UI 衝突管理
- [ ] 完整測試鍵盤快捷鍵
- [ ] 驗證帳號序號顯示
- [ ] 測試遊戲版號顯示
- [ ] 建立完整的功能啟用文檔

---

**上次更新:** 2025-10-27  
**更新者:** Development Team  
**狀態:** 🟡 開發中






language/eng/Ucoin 活動素材需要補 , 需要重製
res/UCoin/ 活動素材



Activity 紅包活動 
res/redpacket/ 紅包活動素材

Jackpot 紅包活動
res/redpacket/ 紅包活動素材







